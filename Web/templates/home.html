{% extends "base.html" %}

{% block title %}Ana Sayfa - Solara{% endblock %}

{% block content %}
    <div class="content">
        <div class="topbar">
            <!-- <div class="topbar-logo">Solara</div> --> <!-- Logo can be shown here on mobile if needed -->
            <div class="topbar-search">
                <input type="text" placeholder="Ara">
            </div>
        </div>
        <div class="main-content">
            <div class="feed">
                {% for post in posts %}
                <div class="post">
                    <div class="post-header">
                        {% if post.profile_picture_url %}
                        <img src="{{ post.profile_picture_url }}" alt="Avatar" class="post-avatar">
                        {% else %}
                        <img src="https://randomuser.me/api/portraits/men/{{ post.user_id % 100 }}.jpg" alt="Avatar" class="post-avatar"> {# Placeholder if no profile picture #}
                        {% endif %}
                        <div class="post-author-info">
                            <div class="post-author">{{ post.username }} <span style="color:#888; font-weight: normal;">@{{ post.username }}</span></div> {# Assuming username is also the handle #}
                            <div class="post-time">{{ post.created_at }}</div> {# You might want to format this date #}
                        </div>
                        <div class="post-options">
                            <i class="fas fa-ellipsis-h"></i>
                        </div>
                    </div>
                    <div class="post-content">
                        {{ post.content_text }}
                        {% if post.image_url %}
                            <img src="{{ post.image_url }}" alt="Post Image" style="max-width: 100%; height: auto; margin-top: 10px;">
                        {% endif %}
                    </div>
                    <div class="post-actions">
                        <div class="post-actions-item"><i class="far fa-heart"></i> {{ post.likes_count }}</div>
                        <div class="post-actions-item"><i class="far fa-comment"></i> {{ post.comments_count }}</div>
                        <div class="post-actions-item"><i class="far fa-eye"></i> {{ post.views_count | default(0) }}</div> {# Views count is not fetched yet #}
                        <div class="post-actions-item"><i class="far fa-bookmark"></i></div>
                    </div>
                </div>
                {% endfor %}
            </div>
            <div class="sidebar-right">
                <div class="sidebar-right-section">
                    <div class="sidebar-right-title">Ã–nerilenler</div>
                    <!-- Dynamic suggestions will be loaded here by JavaScript -->
                    <div id="suggested-users-list">
                        <!-- Suggested users will be added here -->
                    </div>
                </div>
                {# Removed static Weekly Rank section as requested #}
            </div>
        </div>
    </div>
{% endblock %}

{% block scripts_extra %}
    <script src="{{ url_for('static', filename='js/home.js') }}"></script>

    <!-- Comment Modal Structure -->
    <div id="commentModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeCommentModal()">&times;</span>
            <h2>Add a Comment</h2>
            <textarea id="commentInput" placeholder="Write your comment here..."></textarea>
            <button onclick="submitComment()">Submit Comment</button>
        </div>
    </div>
{% endblock %}
