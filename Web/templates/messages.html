{% extends "base.html" %}

{% block title %}Mesajlar - Solara{% endblock %}

{% block body_class %}messages-page{% endblock %}

{% block content %}
    <!-- Main Content Area -->
    <div class="messages-container">
        <!-- User List (Redesigned) -->
        <div class="user-list">
            <div class="user-list-header">
                <div class="user-list-header-top">
                    <h2 class="user-list-title">Mesajlar</h2>
                    <button class="new-message-btn" aria-label="Yeni Mesaj">
                        <i class="fas fa-edit"></i>
                    </button>
                </div>
                <div class="search-container">
                    <input type="text" placeholder="Ara veya yeni sohbet başlat">
                </div>
            </div>
            <div class="user-list-content">
                <!-- User list will be populated dynamically by messages.js -->
            </div>
        </div>

        <!-- Chat Area (Content remains the same, dynamically loaded) -->
        <div class="chat-area" id="chatArea">
            <!-- Initial State or Selected Chat -->
             <div class="chat-header" id="chatHeader">
                <!-- Avatar, name, and status will be loaded dynamically by messages.js -->
                <div class="chat-header-info">
                    <img src="" alt="Avatar" class="chat-header-avatar" id="chatHeaderAvatar">
                    <div class="chat-header-details">
                        <div class="chat-header-name" id="chatHeaderName"></div>
                        <div class="chat-header-status" id="chatHeaderStatus"></div>
                    </div>
                </div>
                <div class="chat-header-options">
                    <i class="fas fa-info-circle"></i>
                </div>
            </div>
            <div class="message-list" id="messageList">
                <!-- Messages will be loaded dynamically by messages.js -->
             </div>
            <div class="message-input-area">
                 <!-- Optional: Emoji/Attach buttons -->
                 <!-- <button class="input-action-button"><i class="far fa-grin"></i></button> -->
                <input type="text" class="message-input" placeholder="Mesaj yaz..." id="messageInput">
                 <!-- <button class="input-action-button"><i class="fas fa-paper-plane"></i></button> -->
                <button class="send-button" id="sendButton"><i class="fas fa-paper-plane"></i></button>
            </div>
        </div>

         <!-- Placeholder for when no chat is selected (Optional) -->
        <!-- <div class="chat-area-placeholder" id="chatPlaceholder" style="display: none; flex-grow: 1; align-items: center; justify-content: center; text-align: center; color: #8e8e8e;">
             <div>
                <i class="fas fa-comments" style="font-size: 50px; margin-bottom: 15px;"></i>
                <h2>Mesajların</h2>
                <p>Arkadaşlarına özel mesajlar gönder.</p>
             </div>
        </div> -->

    </div>
{% endblock %}

{% block scripts_extra %}
    <script src="{{ url_for('static', filename='js/messages.js') }}"></script>

    <!-- New Message Modal Structure -->
    <div id="newMessageModal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2>Yeni Mesaj Başlat</h2>
            <div class="user-search">
                <input type="text" id="userSearchInput" placeholder="Kullanıcı ara...">
            </div>
            <div id="userListForNewMessage" class="user-list-for-new-message">
                <!-- User list will be populated here -->
                <p style="text-align: center; padding: 20px; color: #888;">Kullanıcılar yükleniyor...</p>
            </div>
        </div>
    </div>
{% endblock %}
